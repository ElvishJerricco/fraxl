<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Data.Binary</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Data-Binary.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Data-Binary.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">binary-0.7.5.0: Binary serialisation for Haskell values using lazy ByteStrings</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>Lennart Kolmodin</td></tr><tr><th>License</th><td>BSD3-style (see LICENSE)</td></tr><tr><th>Maintainer</th><td>Lennart Kolmodin &lt;kolmodin@gmail.com&gt;</td></tr><tr><th>Stability</th><td>unstable</td></tr><tr><th>Portability</th><td>portable to Hugs and GHC. Requires the FFI and some flexible instances.</td></tr><tr><th>Safe Haskell</th><td>Trustworthy</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Data.Binary</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">The Binary class</a><ul><li><a href="#g:2">Example</a></li></ul></li><li><a href="#g:3">Generic support</a></li><li><a href="#g:4">The Get and Put monads</a></li><li><a href="#g:5">Useful helpers for writing instances</a></li><li><a href="#g:6">Binary serialisation</a></li><li><a href="#g:7">IO functions for serialisation</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Binary serialisation of Haskell values to and from lazy <code><a href="../bytestring-0.10.6.0/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></code>s.
 The Binary library provides methods for encoding Haskell values as
 streams of bytes directly in memory. The resulting <code><a href="../bytestring-0.10.6.0/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></code> can
 then be written to disk, sent over the network, or further processed
 (for example, compressed with gzip).</p><p>The <code>binary</code> package is notable in that it provides both pure, and
 high performance serialisation.</p><p>Values encoded using the <code><a href="Data-Binary.html#t:Binary">Binary</a></code> class are always encoded in network order
 (big endian) form, and encoded data should be portable across
 machine endianness, word size, or compiler version. For example,
 data encoded using the <code><a href="Data-Binary.html#t:Binary">Binary</a></code> class could be written on any machine,
 and read back on any another.</p><p>If the specifics of the data format is not important to you, for example,
 you are more interested in serializing and deserializing values than
 in which format will be used, it is possible to derive <code><a href="Data-Binary.html#t:Binary">Binary</a></code>
 instances using the generic support. See <code><a href="Data-Binary.html#t:GBinary">GBinary</a></code>.</p><p>If you have specific requirements about the encoding format, you can use
 the encoding and decoding primitives directly, see the modules
 <a href="Data-Binary-Get.html">Data.Binary.Get</a> and <a href="Data-Binary-Put.html">Data.Binary.Put</a>.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">class</span> <a href="#t:Binary">Binary</a> t <span class="keyword">where</span><ul class="subs"><li><a href="#v:put">put</a> :: t -&gt; <a href="Data-Binary.html#t:Put">Put</a></li><li><a href="#v:get">get</a> :: <a href="Data-Binary.html#t:Get">Get</a> t</li></ul></li><li class="src short"><span class="keyword">class</span> <a href="#t:GBinary">GBinary</a> f <span class="keyword">where</span><ul class="subs"><li><a href="#v:gput">gput</a> :: f t -&gt; <a href="Data-Binary.html#t:Put">Put</a></li><li><a href="#v:gget">gget</a> :: <a href="Data-Binary.html#t:Get">Get</a> (f t)</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Get">Get</a> a</li><li class="src short"><span class="keyword">type</span> <a href="#t:Put">Put</a> = <a href="Data-Binary-Put.html#t:PutM">PutM</a> ()</li><li class="src short"><a href="#v:putWord8">putWord8</a> :: <a href="../base-4.8.2.0/Data-Word.html#t:Word8">Word8</a> -&gt; <a href="Data-Binary.html#t:Put">Put</a></li><li class="src short"><a href="#v:getWord8">getWord8</a> :: <a href="Data-Binary.html#t:Get">Get</a> <a href="../base-4.8.2.0/Data-Word.html#t:Word8">Word8</a></li><li class="src short"><a href="#v:encode">encode</a> :: <a href="Data-Binary.html#t:Binary">Binary</a> a =&gt; a -&gt; <a href="../bytestring-0.10.6.0/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></li><li class="src short"><a href="#v:decode">decode</a> :: <a href="Data-Binary.html#t:Binary">Binary</a> a =&gt; <a href="../bytestring-0.10.6.0/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> -&gt; a</li><li class="src short"><a href="#v:decodeOrFail">decodeOrFail</a> :: <a href="Data-Binary.html#t:Binary">Binary</a> a =&gt; <a href="../bytestring-0.10.6.0/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> -&gt; <a href="../base-4.8.2.0/Data-Either.html#t:Either">Either</a> (<a href="../bytestring-0.10.6.0/Data-ByteString-Lazy.html#t:ByteString">ByteString</a>, <a href="Data-Binary-Get.html#t:ByteOffset">ByteOffset</a>, <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>) (<a href="../bytestring-0.10.6.0/Data-ByteString-Lazy.html#t:ByteString">ByteString</a>, <a href="Data-Binary-Get.html#t:ByteOffset">ByteOffset</a>, a)</li><li class="src short"><a href="#v:encodeFile">encodeFile</a> :: <a href="Data-Binary.html#t:Binary">Binary</a> a =&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; a -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:decodeFile">decodeFile</a> :: <a href="Data-Binary.html#t:Binary">Binary</a> a =&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:decodeFileOrFail">decodeFileOrFail</a> :: <a href="Data-Binary.html#t:Binary">Binary</a> a =&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/Data-Either.html#t:Either">Either</a> (<a href="Data-Binary-Get.html#t:ByteOffset">ByteOffset</a>, <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>) a)</li><li class="src short">module <a href="../base-4.8.2.0/Data-Word.html">Data.Word</a></li></ul></div><div id="interface"><h1 id="g:1">The Binary class</h1><div class="top"><p class="src"><span class="keyword">class</span> <a name="t:Binary" class="def">Binary</a> t <span class="keyword">where</span> <a href="src/Data-Binary-Class.html#Binary" class="link">Source</a></p><div class="doc"><p>The <code><a href="Data-Binary.html#t:Binary">Binary</a></code> class provides <code><a href="Data-Binary.html#v:put">put</a></code> and <code><a href="Data-Binary.html#v:get">get</a></code>, methods to encode and
 decode a Haskell value to a lazy <code><a href="../bytestring-0.10.6.0/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></code>. It mirrors the <code><a href="../base-4.8.2.0/Text-Read.html#t:Read">Read</a></code> and
 <code><a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a></code> classes for textual representation of Haskell types, and is
 suitable for serialising Haskell values to disk, over the network.</p><p>For decoding and generating simple external binary formats (e.g. C
 structures), Binary may be used, but in general is not suitable
 for complex protocols. Instead use the <code><a href="Data-Binary.html#t:Put">Put</a></code> and <code><a href="Data-Binary.html#t:Get">Get</a></code> primitives
 directly.</p><p>Instances of Binary should satisfy the following property:</p><pre>decode . encode == id</pre><p>That is, the <code><a href="Data-Binary.html#v:get">get</a></code> and <code><a href="Data-Binary.html#v:put">put</a></code> methods should be the inverse of each
 other. A range of instances are provided for basic Haskell types.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src">Nothing</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:put" class="def">put</a> :: t -&gt; <a href="Data-Binary.html#t:Put">Put</a> <a href="src/Data-Binary-Class.html#put" class="link">Source</a></p><div class="doc"><p>Encode a value in the Put monad.</p></div><p class="src"><a name="v:get" class="def">get</a> :: <a href="Data-Binary.html#t:Get">Get</a> t <a href="src/Data-Binary-Class.html#get" class="link">Source</a></p><div class="doc"><p>Decode a value in the Get monad</p></div></div><div class="subs instances"><p id="control.i:Binary" class="caption collapser" onclick="toggleSection('i:Binary')">Instances</p><div id="section.i:Binary" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../base-4.8.2.0/Data-Char.html#t:Char">Char</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../base-4.8.2.0/Prelude.html#t:Float">Float</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../base-4.8.2.0/Data-Int.html#t:Int8">Int8</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../base-4.8.2.0/Data-Int.html#t:Int16">Int16</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../base-4.8.2.0/Data-Int.html#t:Int32">Int32</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../base-4.8.2.0/Data-Int.html#t:Int64">Int64</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../base-4.8.2.0/Prelude.html#t:Integer">Integer</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../base-4.8.2.0/Data-Ord.html#t:Ordering">Ordering</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../base-4.8.2.0/Data-Word.html#t:Word">Word</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../base-4.8.2.0/Data-Word.html#t:Word8">Word8</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../base-4.8.2.0/Data-Word.html#t:Word16">Word16</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../base-4.8.2.0/Data-Word.html#t:Word32">Word32</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../base-4.8.2.0/Data-Word.html#t:Word64">Word64</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> ()</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../base-4.8.2.0/Numeric-Natural.html#t:Natural">Natural</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../bytestring-0.10.6.0/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> <a href="../containers-0.5.6.2/Data-IntSet.html#t:IntSet">IntSet</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> a =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> [a]</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Data-Binary.html#t:Binary">Binary</a> a, <a href="../base-4.8.2.0/Prelude.html#t:Integral">Integral</a> a) =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> (<a href="../base-4.8.2.0/Data-Ratio.html#t:Ratio">Ratio</a> a)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> a =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> a)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> e =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> (<a href="../containers-0.5.6.2/Data-IntMap-Strict.html#t:IntMap">IntMap</a> e)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> a =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> (<a href="../containers-0.5.6.2/Data-Set.html#t:Set">Set</a> a)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> e =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> (<a href="../containers-0.5.6.2/Data-Tree.html#t:Tree">Tree</a> e)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Binary.html#t:Binary">Binary</a> e =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> (<a href="../containers-0.5.6.2/Data-Sequence.html#t:Seq">Seq</a> e)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Data-Binary.html#t:Binary">Binary</a> a, <a href="Data-Binary.html#t:Binary">Binary</a> b) =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> (<a href="../base-4.8.2.0/Data-Either.html#t:Either">Either</a> a b)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Data-Binary.html#t:Binary">Binary</a> a, <a href="Data-Binary.html#t:Binary">Binary</a> b) =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> (a, b)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Data-Binary.html#t:Binary">Binary</a> i, <a href="../base-4.8.2.0/Data-Ix.html#t:Ix">Ix</a> i, <a href="Data-Binary.html#t:Binary">Binary</a> e, <a href="../array-0.5.1.0/Data-Array-IArray.html#t:IArray">IArray</a> <a href="../array-0.5.1.0/Data-Array-Unboxed.html#t:UArray">UArray</a> e) =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> (<a href="../array-0.5.1.0/Data-Array-Unboxed.html#t:UArray">UArray</a> i e)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Data-Binary.html#t:Binary">Binary</a> i, <a href="../base-4.8.2.0/Data-Ix.html#t:Ix">Ix</a> i, <a href="Data-Binary.html#t:Binary">Binary</a> e) =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> (<a href="../array-0.5.1.0/Data-Array.html#t:Array">Array</a> i e)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Data-Binary.html#t:Binary">Binary</a> k, <a href="Data-Binary.html#t:Binary">Binary</a> e) =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> (<a href="../containers-0.5.6.2/Data-Map-Lazy.html#t:Map">Map</a> k e)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Data-Binary.html#t:Binary">Binary</a> a, <a href="Data-Binary.html#t:Binary">Binary</a> b, <a href="Data-Binary.html#t:Binary">Binary</a> c) =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> (a, b, c)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Data-Binary.html#t:Binary">Binary</a> a, <a href="Data-Binary.html#t:Binary">Binary</a> b, <a href="Data-Binary.html#t:Binary">Binary</a> c, <a href="Data-Binary.html#t:Binary">Binary</a> d) =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> (a, b, c, d)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Data-Binary.html#t:Binary">Binary</a> a, <a href="Data-Binary.html#t:Binary">Binary</a> b, <a href="Data-Binary.html#t:Binary">Binary</a> c, <a href="Data-Binary.html#t:Binary">Binary</a> d, <a href="Data-Binary.html#t:Binary">Binary</a> e) =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> (a, b, c, d, e)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Data-Binary.html#t:Binary">Binary</a> a, <a href="Data-Binary.html#t:Binary">Binary</a> b, <a href="Data-Binary.html#t:Binary">Binary</a> c, <a href="Data-Binary.html#t:Binary">Binary</a> d, <a href="Data-Binary.html#t:Binary">Binary</a> e, <a href="Data-Binary.html#t:Binary">Binary</a> f) =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> (a, b, c, d, e, f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Data-Binary.html#t:Binary">Binary</a> a, <a href="Data-Binary.html#t:Binary">Binary</a> b, <a href="Data-Binary.html#t:Binary">Binary</a> c, <a href="Data-Binary.html#t:Binary">Binary</a> d, <a href="Data-Binary.html#t:Binary">Binary</a> e, <a href="Data-Binary.html#t:Binary">Binary</a> f, <a href="Data-Binary.html#t:Binary">Binary</a> g) =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> (a, b, c, d, e, f, g)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Data-Binary.html#t:Binary">Binary</a> a, <a href="Data-Binary.html#t:Binary">Binary</a> b, <a href="Data-Binary.html#t:Binary">Binary</a> c, <a href="Data-Binary.html#t:Binary">Binary</a> d, <a href="Data-Binary.html#t:Binary">Binary</a> e, <a href="Data-Binary.html#t:Binary">Binary</a> f, <a href="Data-Binary.html#t:Binary">Binary</a> g, <a href="Data-Binary.html#t:Binary">Binary</a> h) =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> (a, b, c, d, e, f, g, h)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Data-Binary.html#t:Binary">Binary</a> a, <a href="Data-Binary.html#t:Binary">Binary</a> b, <a href="Data-Binary.html#t:Binary">Binary</a> c, <a href="Data-Binary.html#t:Binary">Binary</a> d, <a href="Data-Binary.html#t:Binary">Binary</a> e, <a href="Data-Binary.html#t:Binary">Binary</a> f, <a href="Data-Binary.html#t:Binary">Binary</a> g, <a href="Data-Binary.html#t:Binary">Binary</a> h, <a href="Data-Binary.html#t:Binary">Binary</a> i) =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> (a, b, c, d, e, f, g, h, i)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Data-Binary.html#t:Binary">Binary</a> a, <a href="Data-Binary.html#t:Binary">Binary</a> b, <a href="Data-Binary.html#t:Binary">Binary</a> c, <a href="Data-Binary.html#t:Binary">Binary</a> d, <a href="Data-Binary.html#t:Binary">Binary</a> e, <a href="Data-Binary.html#t:Binary">Binary</a> f, <a href="Data-Binary.html#t:Binary">Binary</a> g, <a href="Data-Binary.html#t:Binary">Binary</a> h, <a href="Data-Binary.html#t:Binary">Binary</a> i, <a href="Data-Binary.html#t:Binary">Binary</a> j) =&gt; <a href="Data-Binary.html#t:Binary">Binary</a> (a, b, c, d, e, f, g, h, i, j)</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h2 id="g:2">Example</h2><div class="doc"><p>To serialise a custom type, an instance of Binary for that type is
 required. For example, suppose we have a data structure:</p><pre>data Exp = IntE Int
         | OpE  String Exp Exp
   deriving Show</pre><p>We can encode values of this type into bytestrings using the
 following instance, which proceeds by recursively breaking down the
 structure to serialise:</p><pre>instance Binary Exp where
      put (IntE i)      = do put (0 :: Word8)
                             put i
      put (OpE s e1 e2) = do put (1 :: Word8)
                             put s
                             put e1
                             put e2

      get = do t &lt;- get :: Get Word8
               case t of
                    0 -&gt; do i &lt;- get
                            return (IntE i)
                    1 -&gt; do s  &lt;- get
                            e1 &lt;- get
                            e2 &lt;- get
                            return (OpE s e1 e2)</pre><p>Note how we write an initial tag byte to indicate each variant of the
 data type.</p><p>We can simplify the writing of <code><a href="Data-Binary.html#v:get">get</a></code> instances using monadic
 combinators:</p><pre>      get = do tag &lt;- getWord8
               case tag of
                   0 -&gt; liftM  IntE get
                   1 -&gt; liftM3 OpE  get get get</pre><p>To serialise this to a bytestring, we use <code><a href="Data-Binary.html#v:encode">encode</a></code>, which packs the
 data structure into a binary format, in a lazy bytestring</p><pre>&gt; let e = OpE &quot;*&quot; (IntE 7) (OpE &quot;/&quot; (IntE 4) (IntE 2))
&gt; let v = encode e</pre><p>Where <code>v</code> is a binary encoded data structure. To reconstruct the
 original data, we use <code><a href="Data-Binary.html#v:decode">decode</a></code></p><pre>&gt; decode v :: Exp
OpE &quot;*&quot; (IntE 7) (OpE &quot;/&quot; (IntE 4) (IntE 2))</pre><p>The lazy ByteString that results from <code><a href="Data-Binary.html#v:encode">encode</a></code> can be written to
 disk, and read from disk using Data.ByteString.Lazy IO functions,
 such as hPutStr or writeFile:</p><pre>&gt; writeFile &quot;/tmp/exp.txt&quot; (encode e)</pre><p>And read back with:</p><pre>&gt; readFile &quot;/tmp/exp.txt&quot; &gt;&gt;= return . decode :: IO Exp
OpE &quot;*&quot; (IntE 7) (OpE &quot;/&quot; (IntE 4) (IntE 2))</pre><p>We can also directly serialise a value to and from a Handle, or a file:</p><pre>&gt; v &lt;- decodeFile  &quot;/tmp/exp.txt&quot; :: IO Exp
OpE &quot;*&quot; (IntE 7) (OpE &quot;/&quot; (IntE 4) (IntE 2))</pre><p>And write a value to disk</p><pre>&gt; encodeFile &quot;/tmp/a.txt&quot; v</pre></div><h1 id="g:3">Generic support</h1><div class="doc"><p>Beginning with GHC 7.2, it is possible to use binary serialization
 without writing any instance boilerplate code.</p><pre>{-# LANGUAGE DeriveGeneric #-}

import Data.Binary
import GHC.Generics (Generic)

data Foo = Foo
         deriving (Generic)

-- GHC will automatically fill out the instance
instance Binary Foo</pre><p>This mechanism makes use of GHC's efficient built-in generics
 support.</p></div><div class="top"><p class="src"><span class="keyword">class</span> <a name="t:GBinary" class="def">GBinary</a> f <span class="keyword">where</span> <a href="src/Data-Binary-Class.html#GBinary" class="link">Source</a></p><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:gput" class="def">gput</a> :: f t -&gt; <a href="Data-Binary.html#t:Put">Put</a> <a href="src/Data-Binary-Class.html#gput" class="link">Source</a></p><p class="src"><a name="v:gget" class="def">gget</a> :: <a href="Data-Binary.html#t:Get">Get</a> (f t) <a href="src/Data-Binary-Class.html#gget" class="link">Source</a></p></div></div><h1 id="g:4">The Get and Put monads</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Get" class="def">Get</a> a <a href="src/Data-Binary-Get-Internal.html#Get" class="link">Source</a></p><div class="subs instances"><p id="control.i:Get" class="caption collapser" onclick="toggleSection('i:Get')">Instances</p><div id="section.i:Get" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> <a href="Data-Binary.html#t:Get">Get</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> <a href="Data-Binary.html#t:Get">Get</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> <a href="Data-Binary.html#t:Get">Get</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Applicative.html#t:Alternative">Alternative</a> <a href="Data-Binary.html#t:Get">Get</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Monad.html#t:MonadPlus">MonadPlus</a> <a href="Data-Binary.html#t:Get">Get</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Put" class="def">Put</a> = <a href="Data-Binary-Put.html#t:PutM">PutM</a> () <a href="src/Data-Binary-Put.html#Put" class="link">Source</a></p><div class="doc"><p>Put merely lifts Builder into a Writer monad, applied to ().</p></div></div><h1 id="g:5">Useful helpers for writing instances</h1><div class="top"><p class="src"><a name="v:putWord8" class="def">putWord8</a> :: <a href="../base-4.8.2.0/Data-Word.html#t:Word8">Word8</a> -&gt; <a href="Data-Binary.html#t:Put">Put</a> <a href="src/Data-Binary-Put.html#putWord8" class="link">Source</a></p><div class="doc"><p>Efficiently write a byte into the output buffer</p></div></div><div class="top"><p class="src"><a name="v:getWord8" class="def">getWord8</a> :: <a href="Data-Binary.html#t:Get">Get</a> <a href="../base-4.8.2.0/Data-Word.html#t:Word8">Word8</a> <a href="src/Data-Binary-Get.html#getWord8" class="link">Source</a></p><div class="doc"><p>Read a Word8 from the monad state</p></div></div><h1 id="g:6">Binary serialisation</h1><div class="top"><p class="src"><a name="v:encode" class="def">encode</a> :: <a href="Data-Binary.html#t:Binary">Binary</a> a =&gt; a -&gt; <a href="../bytestring-0.10.6.0/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> <a href="src/Data-Binary.html#encode" class="link">Source</a></p><div class="doc"><p>Encode a value using binary serialisation to a lazy ByteString.</p></div></div><div class="top"><p class="src"><a name="v:decode" class="def">decode</a> :: <a href="Data-Binary.html#t:Binary">Binary</a> a =&gt; <a href="../bytestring-0.10.6.0/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> -&gt; a <a href="src/Data-Binary.html#decode" class="link">Source</a></p><div class="doc"><p>Decode a value from a lazy ByteString, reconstructing the original structure.</p></div></div><div class="top"><p class="src"><a name="v:decodeOrFail" class="def">decodeOrFail</a> :: <a href="Data-Binary.html#t:Binary">Binary</a> a =&gt; <a href="../bytestring-0.10.6.0/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> -&gt; <a href="../base-4.8.2.0/Data-Either.html#t:Either">Either</a> (<a href="../bytestring-0.10.6.0/Data-ByteString-Lazy.html#t:ByteString">ByteString</a>, <a href="Data-Binary-Get.html#t:ByteOffset">ByteOffset</a>, <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>) (<a href="../bytestring-0.10.6.0/Data-ByteString-Lazy.html#t:ByteString">ByteString</a>, <a href="Data-Binary-Get.html#t:ByteOffset">ByteOffset</a>, a) <a href="src/Data-Binary.html#decodeOrFail" class="link">Source</a></p><div class="doc"><p>Decode a value from a lazy ByteString. Returning <code><a href="../base-4.8.2.0/Data-Either.html#v:Left">Left</a></code> on failure and
 <code><a href="../base-4.8.2.0/Data-Either.html#v:Right">Right</a></code> on success. In both cases the unconsumed input and the number of
 consumed bytes is returned. In case of failure, a human-readable error
 message will be returned as well.</p></div></div><h1 id="g:7">IO functions for serialisation</h1><div class="top"><p class="src"><a name="v:encodeFile" class="def">encodeFile</a> :: <a href="Data-Binary.html#t:Binary">Binary</a> a =&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; a -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> () <a href="src/Data-Binary.html#encodeFile" class="link">Source</a></p><div class="doc"><p>Lazily serialise a value to a file.</p><p>This is just a convenience function, it's defined simply as:</p><pre>encodeFile f = B.writeFile f . encode</pre><p>So for example if you wanted to compress as well, you could use:</p><pre>B.writeFile f . compress . encode</pre></div></div><div class="top"><p class="src"><a name="v:decodeFile" class="def">decodeFile</a> :: <a href="Data-Binary.html#t:Binary">Binary</a> a =&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a <a href="src/Data-Binary.html#decodeFile" class="link">Source</a></p><div class="doc"><p>Decode a value from a file. In case of errors, <code><a href="../base-4.8.2.0/Prelude.html#v:error">error</a></code> will
 be called with the error message.</p></div></div><div class="top"><p class="src"><a name="v:decodeFileOrFail" class="def">decodeFileOrFail</a> :: <a href="Data-Binary.html#t:Binary">Binary</a> a =&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/Data-Either.html#t:Either">Either</a> (<a href="Data-Binary-Get.html#t:ByteOffset">ByteOffset</a>, <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>) a) <a href="src/Data-Binary.html#decodeFileOrFail" class="link">Source</a></p><div class="doc"><p>Decode a value from a file. In case of success, the value will be returned
 in <code><a href="../base-4.8.2.0/Data-Either.html#v:Right">Right</a></code>. In case of decoder errors, the error message together with
 the byte offset will be returned.</p></div></div><div class="top"><p class="src">module <a href="../base-4.8.2.0/Data-Word.html">Data.Word</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>