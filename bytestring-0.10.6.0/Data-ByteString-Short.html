<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Data.ByteString.Short</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Data-ByteString-Short.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Data-ByteString-Short.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">bytestring-0.10.6.0: Fast, compact, strict and lazy byte strings with a list interface</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>(c) Duncan Coutts 2012-2013</td></tr><tr><th>License</th><td>BSD-style</td></tr><tr><th>Maintainer</th><td>duncan@community.haskell.org</td></tr><tr><th>Stability</th><td>stable</td></tr><tr><th>Portability</th><td>ghc only</td></tr><tr><th>Safe Haskell</th><td>Trustworthy</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Data.ByteString.Short</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">The <code>ShortByteString</code> type</a><ul><li><a href="#g:2">Memory overhead</a></li><li><a href="#g:3">Heap fragmentation</a></li></ul></li><li><a href="#g:4">Conversions</a></li><li><a href="#g:5">Other operations</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A compact representation suitable for storing short byte strings in memory.</p><p>In typical use cases it can be imported alongside <a href="Data-ByteString.html">Data.ByteString</a>, e.g.</p><pre>import qualified Data.ByteString       as B
import qualified Data.ByteString.Short as B
         (ShortByteString, toShort, fromShort)</pre><p>Other <code><a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></code> operations clash with <a href="Data-ByteString.html">Data.ByteString</a> or <a href="../base-4.8.2.0/Prelude.html">Prelude</a>
 functions however, so they should be imported <code>qualified</code> with a different
 alias e.g.</p><pre>import qualified Data.ByteString.Short as B.Short</pre></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:ShortByteString">ShortByteString</a></li><li class="src short"><a href="#v:toShort">toShort</a> :: <a href="Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></li><li class="src short"><a href="#v:fromShort">fromShort</a> :: <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a> -&gt; <a href="Data-ByteString.html#t:ByteString">ByteString</a></li><li class="src short"><a href="#v:pack">pack</a> :: [<a href="../base-4.8.2.0/Data-Word.html#t:Word8">Word8</a>] -&gt; <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></li><li class="src short"><a href="#v:unpack">unpack</a> :: <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a> -&gt; [<a href="../base-4.8.2.0/Data-Word.html#t:Word8">Word8</a>]</li><li class="src short"><a href="#v:empty">empty</a> :: <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></li><li class="src short"><a href="#v:null">null</a> :: <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a> -&gt; <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:length">length</a> :: <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:index">index</a> :: <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/Data-Word.html#t:Word8">Word8</a></li></ul></div><div id="interface"><h1 id="g:1">The <code>ShortByteString</code> type</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:ShortByteString" class="def">ShortByteString</a> <a href="src/Data-ByteString-Short-Internal.html#ShortByteString" class="link">Source</a></p><div class="doc"><p>A compact representation of a <code><a href="../base-4.8.2.0/Data-Word.html#t:Word8">Word8</a></code> vector.</p><p>It has a lower memory overhead than a <code><a href="Data-ByteString.html#t:ByteString">ByteString</a></code> and and does not
 contribute to heap fragmentation. It can be converted to or from a
 <code><a href="Data-ByteString.html#t:ByteString">ByteString</a></code> (at the cost of copying the string data). It supports very few
 other operations.</p><p>It is suitable for use as an internal representation for code that needs
 to keep many short strings in memory, but it <em>should not</em> be used as an
 interchange type. That is, it should not generally be used in public APIs.
 The <code><a href="Data-ByteString.html#t:ByteString">ByteString</a></code> type is usually more suitable for use in interfaces; it is
 more flexible and it supports a wide range of operations.</p></div><div class="subs instances"><p id="control.i:ShortByteString" class="caption collapser" onclick="toggleSection('i:ShortByteString')">Instances</p><div id="section.i:ShortByteString" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Eq.html#t:Eq">Eq</a> <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Data.html#t:Data">Data</a> <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Ord.html#t:Ord">Ord</a> <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Read.html#t:Read">Read</a> <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-String.html#t:IsString">IsString</a> <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Monoid.html#t:Monoid">Monoid</a> <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../deepseq-1.4.1.1/Control-DeepSeq.html#t:NFData">NFData</a> <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h2 id="g:2">Memory overhead</h2><div class="doc"><p>With GHC, the memory overheads are as follows, expressed in words and
 in bytes (words are 4 and 8 bytes on 32 or 64bit machines respectively).</p><ul><li><code>ByteString</code> unshared: 9 words; 36 or 72 bytes.</li><li><code>ByteString</code> shared substring: 5 words; 20 or 40 bytes.</li><li><code><a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></code>: 4 words; 16 or 32 bytes.</li></ul><p>For the string data itself, both <code><a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></code> and <code>ByteString</code> use
 one byte per element, rounded up to the nearest word. For example,
 including the overheads, a length 10 <code><a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></code> would take
 <code>16 + 12 = 28</code> bytes on a 32bit platform and <code>32 + 16 = 48</code> bytes on a
 64bit platform.</p><p>These overheads can all be reduced by 1 word (4 or 8 bytes) when the
 <code><a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></code> or <code>ByteString</code> is unpacked into another constructor.</p><p>For example:</p><pre>data ThingId = ThingId {-# UNPACK #-} !Int
                       {-# UNPACK #-} !ShortByteString</pre><p>This will take <code>1 + 1 + 3</code> words (the <code>ThingId</code> constructor +
 unpacked <code>Int</code> + unpacked <code>ShortByteString</code>), plus the words for the
 string data.</p></div><h2 id="g:3">Heap fragmentation</h2><div class="doc"><p>With GHC, the <code>ByteString</code> representation uses <em>pinned</em> memory,
 meaning it cannot be moved by the GC. This is usually the right thing to
 do for larger strings, but for small strings using pinned memory can
 lead to heap fragmentation which wastes space. The <code><a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></code>
 type (and the <code>Text</code> type from the <code>text</code> package) use <em>unpinned</em> memory
 so they do not contribute to heap fragmentation. In addition, with GHC,
 small unpinned strings are allocated in the same way as normal heap
 allocations, rather than in a separate pinned area.</p></div><h1 id="g:4">Conversions</h1><div class="top"><p class="src"><a name="v:toShort" class="def">toShort</a> :: <a href="Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a> <a href="src/Data-ByteString-Short-Internal.html#toShort" class="link">Source</a></p><div class="doc"><p><em>O(n)</em>. Convert a <code><a href="Data-ByteString.html#t:ByteString">ByteString</a></code> into a <code><a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></code>.</p><p>This makes a copy, so does not retain the input string.</p></div></div><div class="top"><p class="src"><a name="v:fromShort" class="def">fromShort</a> :: <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a> -&gt; <a href="Data-ByteString.html#t:ByteString">ByteString</a> <a href="src/Data-ByteString-Short-Internal.html#fromShort" class="link">Source</a></p><div class="doc"><p><em>O(n)</em>. Convert a <code><a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></code> into a <code><a href="Data-ByteString.html#t:ByteString">ByteString</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:pack" class="def">pack</a> :: [<a href="../base-4.8.2.0/Data-Word.html#t:Word8">Word8</a>] -&gt; <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a> <a href="src/Data-ByteString-Short-Internal.html#pack" class="link">Source</a></p><div class="doc"><p><em>O(n)</em>. Convert a list into a <code><a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></code></p></div></div><div class="top"><p class="src"><a name="v:unpack" class="def">unpack</a> :: <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a> -&gt; [<a href="../base-4.8.2.0/Data-Word.html#t:Word8">Word8</a>] <a href="src/Data-ByteString-Short-Internal.html#unpack" class="link">Source</a></p><div class="doc"><p><em>O(n)</em>. Convert a <code><a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></code> into a list.</p></div></div><h1 id="g:5">Other operations</h1><div class="top"><p class="src"><a name="v:empty" class="def">empty</a> :: <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a> <a href="src/Data-ByteString-Short-Internal.html#empty" class="link">Source</a></p><div class="doc"><p><em>O(1)</em>. The empty <code><a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:null" class="def">null</a> :: <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a> -&gt; <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Data-ByteString-Short-Internal.html#null" class="link">Source</a></p><div class="doc"><p><em>O(1)</em> Test whether a <code><a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></code> is empty.</p></div></div><div class="top"><p class="src"><a name="v:length" class="def">length</a> :: <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> <a href="src/Data-ByteString-Short-Internal.html#length" class="link">Source</a></p><div class="doc"><p><em>O(1)</em> The length of a <code><a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:index" class="def">index</a> :: <a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/Data-Word.html#t:Word8">Word8</a> <a href="src/Data-ByteString-Short-Internal.html#index" class="link">Source</a></p><div class="doc"><p><em>O(1)</em> <code><a href="Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></code> index (subscript) operator, starting from 0. </p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>