<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Data.Dependent.Sum</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Data-Dependent-Sum.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">dependent-sum-0.3.2.1: Dependent sum type</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Data.Dependent.Sum</p></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:DSum">DSum</a> tag f = <span class="keyword">forall</span> a . !(tag a) <a href="#v::-61--62-">:=&gt;</a> (f a)</li><li class="src short"><a href="#v:-61--61--62-">(==&gt;)</a> :: <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f =&gt; tag a -&gt; a -&gt; <a href="Data-Dependent-Sum.html#t:DSum">DSum</a> tag f</li><li class="src short"><span class="keyword">class</span> <a href="Data-GADT-Show.html#t:GShow">GShow</a> tag =&gt; <a href="#t:ShowTag">ShowTag</a> tag f <span class="keyword">where</span><ul class="subs"><li><a href="#v:showTaggedPrec">showTaggedPrec</a> :: tag a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; f a -&gt; <a href="../base-4.8.2.0/Text-Show.html#t:ShowS">ShowS</a></li></ul></li><li class="src short"><span class="keyword">class</span> <a href="Data-GADT-Show.html#t:GRead">GRead</a> tag =&gt; <a href="#t:ReadTag">ReadTag</a> tag f <span class="keyword">where</span><ul class="subs"><li><a href="#v:readTaggedPrec">readTaggedPrec</a> :: tag a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/Text-ParserCombinators-ReadP.html#t:ReadS">ReadS</a> (f a)</li></ul></li><li class="src short"><span class="keyword">class</span> <a href="Data-GADT-Compare.html#t:GEq">GEq</a> tag =&gt; <a href="#t:EqTag">EqTag</a> tag f <span class="keyword">where</span><ul class="subs"><li><a href="#v:eqTagged">eqTagged</a> :: tag a -&gt; tag a -&gt; f a -&gt; f a -&gt; <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li></ul></li><li class="src short"><span class="keyword">class</span> (<a href="Data-Dependent-Sum.html#t:EqTag">EqTag</a> tag f, <a href="Data-GADT-Compare.html#t:GCompare">GCompare</a> tag) =&gt; <a href="#t:OrdTag">OrdTag</a> tag f <span class="keyword">where</span><ul class="subs"><li><a href="#v:compareTagged">compareTagged</a> :: tag a -&gt; tag a -&gt; f a -&gt; f a -&gt; <a href="../base-4.8.2.0/Data-Ord.html#t:Ordering">Ordering</a></li></ul></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:DSum" class="def">DSum</a> tag f</p><div class="doc"><p>A basic dependent sum type; the first component is a tag that specifies 
 the type of the second;  for example, think of a GADT such as:</p><pre>data Tag a where
   AString :: Tag String
   AnInt   :: Tag Int</pre><p>Then, we have the following valid expressions of type <code>DSum Tag</code>:</p><pre>AString :=&gt; &quot;hello!&quot;
AnInt   :=&gt; 42</pre><p>And we can write functions that consume <code>DSum Tag</code> values by matching, 
 such as:</p><pre>toString :: DSum Tag -&gt; String
toString (AString :=&gt; str) = str
toString (AnInt   :=&gt; int) = show int</pre><p>By analogy to the (key =&gt; value) construction for dictionary entries in 
 many dynamic languages, we use (key :=&gt; value) as the constructor for 
 dependent sums.  The :=&gt; operator has very low precedence and binds to 
 the right, so if the <code>Tag</code> GADT is extended with an additional constructor
 <code>Rec :: Tag (DSum Tag)</code>, then <code>Rec :=&gt; AnInt :=&gt; 3 + 4</code> is parsed as
 would be expected (<code>Rec :=&gt; (AnInt :=&gt; (3 + 4))</code>) and has type <code>DSum Tag</code>.
 Its precedence is just above that of <code><a href="../base-4.8.2.0/Data-Function.html#v:-36-">$</a></code>, so <code>foo bar $ AString :=&gt; &quot;eep&quot;</code>
 is equivalent to <code>foo bar (AString :=&gt; &quot;eep&quot;)</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><span class="keyword">forall</span> a . !(tag a) <a name="v::-61--62-" class="def">:=&gt;</a> (f a) <span class="fixity">infixr 1</span><span class="rightedge"></span></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:DSum" class="caption collapser" onclick="toggleSection('i:DSum')">Instances</p><div id="section.i:DSum" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Dependent-Sum.html#t:EqTag">EqTag</a> k tag f =&gt; <a href="../base-4.8.2.0/Data-Eq.html#t:Eq">Eq</a> (<a href="Data-Dependent-Sum.html#t:DSum">DSum</a> k tag f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Dependent-Sum.html#t:OrdTag">OrdTag</a> k tag f =&gt; <a href="../base-4.8.2.0/Data-Ord.html#t:Ord">Ord</a> (<a href="Data-Dependent-Sum.html#t:DSum">DSum</a> k tag f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Dependent-Sum.html#t:ReadTag">ReadTag</a> k tag f =&gt; <a href="../base-4.8.2.0/Text-Read.html#t:Read">Read</a> (<a href="Data-Dependent-Sum.html#t:DSum">DSum</a> k tag f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Dependent-Sum.html#t:ShowTag">ShowTag</a> k tag f =&gt; <a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> (<a href="Data-Dependent-Sum.html#t:DSum">DSum</a> k tag f)</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:-61--61--62-" class="def">(==&gt;)</a> :: <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f =&gt; tag a -&gt; a -&gt; <a href="Data-Dependent-Sum.html#t:DSum">DSum</a> tag f <span class="fixity">infixr 1</span><span class="rightedge"></span></p></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="Data-GADT-Show.html#t:GShow">GShow</a> tag =&gt; <a name="t:ShowTag" class="def">ShowTag</a> tag f <span class="keyword">where</span></p><div class="doc"><p>In order to make a <code><a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a></code> instance for <code>DSum tag</code>, <code>tag</code> must be able
 to show itself as well as any value of the tagged type.  <code><a href="Data-GADT-Show.html#t:GShow">GShow</a></code> together
 with this class provides the interface by which it can do so.</p><p><code>ShowTag tag =&gt; t</code> is conceptually equivalent to something like this
 imaginary syntax:  <code>(forall a. Inhabited (tag a) =&gt; Show a) =&gt; t</code>,
 where <code>Inhabited</code> is an imaginary predicate that characterizes 
 non-empty types, and <code>a</code> does not occur free in <code>t</code>.</p><p>The <code>Tag</code> example type introduced in the <code><a href="Data-Dependent-Sum.html#t:DSum">DSum</a></code> section could be given the
 following instances:</p><pre>instance GShow Tag where
    gshowsPrec _p AString = showString &quot;AString&quot;
    gshowsPrec _p AnInt   = showString &quot;AnInt&quot;
instance ShowTag Tag where
    showTaggedPrec AString = showsPrec
    showTaggedPrec AnInt   = showsPrec</pre></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:showTaggedPrec" class="def">showTaggedPrec</a> :: tag a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; f a -&gt; <a href="../base-4.8.2.0/Text-Show.html#t:ShowS">ShowS</a></p><div class="doc"><p>Given a value of type <code>tag a</code>, return the <code><a href="../base-4.8.2.0/Text-Show.html#v:showsPrec">showsPrec</a></code> function for 
 the type parameter <code>a</code>.</p></div></div><div class="subs instances"><p id="control.i:ShowTag" class="caption collapser" onclick="toggleSection('i:ShowTag')">Instances</p><div id="section.i:ShowTag" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> (f a) =&gt; <a href="Data-Dependent-Sum.html#t:ShowTag">ShowTag</a> k (<a href="Data-GADT-Compare.html#t:GOrdering">GOrdering</a> k a) f</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> (f a) =&gt; <a href="Data-Dependent-Sum.html#t:ShowTag">ShowTag</a> k (<a href="Data-GADT-Compare.html#t::-61-">(:=)</a> k a) f</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="Data-GADT-Show.html#t:GRead">GRead</a> tag =&gt; <a name="t:ReadTag" class="def">ReadTag</a> tag f <span class="keyword">where</span></p><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:readTaggedPrec" class="def">readTaggedPrec</a> :: tag a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/Text-ParserCombinators-ReadP.html#t:ReadS">ReadS</a> (f a)</p></div><div class="subs instances"><p id="control.i:ReadTag" class="caption collapser" onclick="toggleSection('i:ReadTag')">Instances</p><div id="section.i:ReadTag" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Read.html#t:Read">Read</a> (f a) =&gt; <a href="Data-Dependent-Sum.html#t:ReadTag">ReadTag</a> k (<a href="Data-GADT-Compare.html#t::-61-">(:=)</a> k a) f</span></td><td class="doc"><p>In order to make a <code><a href="../base-4.8.2.0/Text-Read.html#t:Read">Read</a></code> instance for <code>DSum tag</code>, <code>tag</code> must be able
 to parse itself as well as any value of the tagged type.  <code><a href="Data-GADT-Show.html#t:GRead">GRead</a></code> together
 with this class provides the interface by which it can do so.</p><p><code>ReadTag tag =&gt; t</code> is conceptually equivalent to something like this
 imaginary syntax:  <code>(forall a. Inhabited (tag a) =&gt; Read a) =&gt; t</code>,
 where <code>Inhabited</code> is an imaginary predicate that characterizes 
 non-empty types, and <code>a</code> does not occur free in <code>t</code>.</p><p>The <code>Tag</code> example type introduced in the <code><a href="Data-Dependent-Sum.html#t:DSum">DSum</a></code> section could be given the
 following instances:</p><pre>instance GRead Tag where
    greadsPrec _p str = case tag of
       &quot;AString&quot;   -&gt; [(\k -&gt; k AString, rest)]
       &quot;AnInt&quot;     -&gt; [(\k -&gt; k AnInt,   rest)]
       _           -&gt; []
       where (tag, rest) = break isSpace str
instance ReadTag Tag where
    readTaggedPrec AString = readsPrec
    readTaggedPrec AnInt   = readsPrec</pre></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="Data-GADT-Compare.html#t:GEq">GEq</a> tag =&gt; <a name="t:EqTag" class="def">EqTag</a> tag f <span class="keyword">where</span></p><div class="doc"><p>In order to test <code>DSum tag</code> for equality, <code>tag</code> must know how to test
 both itself and its tagged values for equality.  <code><a href="Data-Dependent-Sum.html#t:EqTag">EqTag</a></code> defines
 the interface by which they are expected to do so.</p><p>Continuing the <code>Tag</code> example from the <code><a href="Data-Dependent-Sum.html#t:DSum">DSum</a></code> section, we can define:</p><pre>instance GEq Tag where
    geq AString AString = Just Refl
    geq AnInt   AnInt   = Just Refl
    geq _       _       = Nothing
instance EqTag Tag where
    eqTagged AString AString = (==)
    eqTagged AnInt   AnInt   = (==)</pre><p>Note that <code><a href="Data-Dependent-Sum.html#v:eqTagged">eqTagged</a></code> is not called until after the tags have been
 compared, so it only needs to consider the cases where <code><a href="Data-GADT-Compare.html#v:gcompare">gcompare</a></code> returns <code><a href="Data-GADT-Compare.html#v:GEQ">GEQ</a></code>.</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:eqTagged" class="def">eqTagged</a> :: tag a -&gt; tag a -&gt; f a -&gt; f a -&gt; <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></p><div class="doc"><p>Given two values of type <code>tag a</code> (for which <code><a href="Data-GADT-Compare.html#v:gcompare">gcompare</a></code> returns <code><a href="Data-GADT-Compare.html#v:GEQ">GEQ</a></code>),
 return the <code><a href="../base-4.8.2.0/Data-Eq.html#v:-61--61-">==</a></code> function for the type <code>a</code>.</p></div></div><div class="subs instances"><p id="control.i:EqTag" class="caption collapser" onclick="toggleSection('i:EqTag')">Instances</p><div id="section.i:EqTag" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Eq.html#t:Eq">Eq</a> (f a) =&gt; <a href="Data-Dependent-Sum.html#t:EqTag">EqTag</a> k (<a href="Data-GADT-Compare.html#t::-61-">(:=)</a> k a) f</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> (<a href="Data-Dependent-Sum.html#t:EqTag">EqTag</a> tag f, <a href="Data-GADT-Compare.html#t:GCompare">GCompare</a> tag) =&gt; <a name="t:OrdTag" class="def">OrdTag</a> tag f <span class="keyword">where</span></p><div class="doc"><p>In order to compare <code>DSum tag</code> values, <code>tag</code> must know how to compare
 both itself and its tagged values.  <code><a href="Data-Dependent-Sum.html#t:OrdTag">OrdTag</a></code> defines the 
 interface by which they are expected to do so.</p><p>Continuing the <code>Tag</code> example from the <code><a href="Data-Dependent-Sum.html#t:EqTag">EqTag</a></code> section, we can define:</p><pre>instance GCompare Tag where
    gcompare AString AString = GEQ
    gcompare AString AnInt   = GLT
    gcompare AnInt   AString = GGT
    gcompare AnInt   AnInt   = GEQ
instance OrdTag Tag where
    compareTagged AString AString = compare
    compareTagged AnInt   AnInt   = compare</pre><p>As with <code><a href="Data-Dependent-Sum.html#v:eqTagged">eqTagged</a></code>, <code><a href="Data-Dependent-Sum.html#v:compareTagged">compareTagged</a></code> only needs to consider cases where
 <code><a href="Data-GADT-Compare.html#v:gcompare">gcompare</a></code> returns <code><a href="Data-GADT-Compare.html#v:GEQ">GEQ</a></code>.</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:compareTagged" class="def">compareTagged</a> :: tag a -&gt; tag a -&gt; f a -&gt; f a -&gt; <a href="../base-4.8.2.0/Data-Ord.html#t:Ordering">Ordering</a></p><div class="doc"><p>Given two values of type <code>tag a</code> (for which <code><a href="Data-GADT-Compare.html#v:gcompare">gcompare</a></code> returns <code><a href="Data-GADT-Compare.html#v:GEQ">GEQ</a></code>),
 return the <code><a href="../base-4.8.2.0/Data-Ord.html#v:compare">compare</a></code> function for the type <code>a</code>.</p></div></div><div class="subs instances"><p id="control.i:OrdTag" class="caption collapser" onclick="toggleSection('i:OrdTag')">Instances</p><div id="section.i:OrdTag" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Ord.html#t:Ord">Ord</a> (f a) =&gt; <a href="Data-Dependent-Sum.html#t:OrdTag">OrdTag</a> k (<a href="Data-GADT-Compare.html#t::-61-">(:=)</a> k a) f</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>