<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Control.Monad.Free.Ap</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Control-Monad-Free-Ap.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">free-4.12.4: Monads for free</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Control.Monad.Free.Ap</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>&quot;Applicative Effects in Free Monads&quot;</p><p>Often times, the '(<a href="*">*</a>)' operator can be more efficient than <code>ap</code>.
 Conventional free monads don't provide any means of modeling this.
 The free monad can be modified to make use of an underlying applicative.
 But it does require some laws, or else the '(<a href="*">*</a>)' = <code>ap</code> law is broken.
 When interpreting this free monad with <code><a href="Control-Monad-Free-Ap.html#v:foldFree">foldFree</a></code>,
 the natural transformation must be an applicative homomorphism.
 An applicative homomorphism <code>hm :: (Applicative f, Applicative g) =&gt; f x -&gt; g x</code>
 will satisfy these laws.</p><ul><li><pre>hm (pure a) = pure a</pre></li><li><pre>hm (f <a href="*">*</a> a) = hm f <a href="*">*</a> hm a</pre></li></ul><p>This is based on the &quot;Applicative Effects in Free Monads&quot; series of articles by Will Fancher</p><ul><li><a href="http://elvishjerricco.github.io/2016/04/08/applicative-effects-in-free-monads.html">Applicative Effects in Free Monads</a></li><li><a href="http://elvishjerricco.github.io/2016/04/13/more-on-applicative-effects-in-free-monads.html">More on Applicative Effects in Free Monads</a></li></ul></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">class</span> <a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="#t:MonadFree">MonadFree</a> f m | m -&gt; f <span class="keyword">where</span><ul class="subs"><li><a href="#v:wrap">wrap</a> :: f (m a) -&gt; m a</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Free">Free</a> f a<ul class="subs"><li>= <a href="#v:Pure">Pure</a> a</li><li>| <a href="#v:Free">Free</a> (f (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a))</li></ul></li><li class="src short"><a href="#v:retract">retract</a> :: (<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f, <a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> f) =&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a -&gt; f a</li><li class="src short"><a href="#v:liftF">liftF</a> :: (<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f m) =&gt; f a -&gt; m a</li><li class="src short"><a href="#v:iter">iter</a> :: <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f =&gt; (f a -&gt; a) -&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a -&gt; a</li><li class="src short"><a href="#v:iterA">iterA</a> :: (<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> p, <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f) =&gt; (f (p a) -&gt; p a) -&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a -&gt; p a</li><li class="src short"><a href="#v:iterM">iterM</a> :: (<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> m, <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f) =&gt; (f (m a) -&gt; m a) -&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a -&gt; m a</li><li class="src short"><a href="#v:hoistFree">hoistFree</a> :: (<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f, <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> g) =&gt; (<span class="keyword">forall</span> a. f a -&gt; g a) -&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f b -&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> g b</li><li class="src short"><a href="#v:foldFree">foldFree</a> :: (<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f, <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> m) =&gt; (<span class="keyword">forall</span> x. f x -&gt; m x) -&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a -&gt; m a</li><li class="src short"><a href="#v:toFreeT">toFreeT</a> :: (<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f, <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> m) =&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a -&gt; <a href="Control-Monad-Trans-Free-Ap.html#t:FreeT">FreeT</a> f m a</li><li class="src short"><a href="#v:cutoff">cutoff</a> :: <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f =&gt; <a href="../base-4.8.2.0/Prelude.html#t:Integer">Integer</a> -&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a -&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:unfold">unfold</a> :: <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f =&gt; (b -&gt; <a href="../base-4.8.2.0/Data-Either.html#t:Either">Either</a> a (f b)) -&gt; b -&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a</li><li class="src short"><a href="#v:unfoldM">unfoldM</a> :: (<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f, <a href="../base-4.8.2.0/Data-Traversable.html#t:Traversable">Traversable</a> f, <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> m) =&gt; (b -&gt; m (<a href="../base-4.8.2.0/Data-Either.html#t:Either">Either</a> a (f b))) -&gt; b -&gt; m (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a)</li><li class="src short"><a href="#v:_Pure">_Pure</a> :: <span class="keyword">forall</span> f m a p. (<a href="../profunctors-5.2/Data-Profunctor-Choice.html#t:Choice">Choice</a> p, <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> m) =&gt; p a (m a) -&gt; p (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a) (m (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a))</li><li class="src short"><a href="#v:_Free">_Free</a> :: <span class="keyword">forall</span> f m a p. (<a href="../profunctors-5.2/Data-Profunctor-Choice.html#t:Choice">Choice</a> p, <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> m) =&gt; p (f (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a)) (m (f (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a))) -&gt; p (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a) (m (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a))</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">class</span> <a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a name="t:MonadFree" class="def">MonadFree</a> f m | m -&gt; f <span class="keyword">where</span></p><div class="doc"><p>Monads provide substitution (<code><a href="../base-4.8.2.0/Data-Functor.html#v:fmap">fmap</a></code>) and renormalization (<code><a href="../base-4.8.2.0/Control-Monad.html#v:join">join</a></code>):</p><pre>m <code><a href="../base-4.8.2.0/Control-Monad.html#v:-62--62--61-">&gt;&gt;=</a></code> f = <code><a href="../base-4.8.2.0/Control-Monad.html#v:join">join</a></code> (<code><a href="../base-4.8.2.0/Data-Functor.html#v:fmap">fmap</a></code> f m)</pre><p>A free <code><a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a></code> is one that does no work during the normalization step beyond simply grafting the two monadic values together.</p><p><code>[]</code> is not a free <code><a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a></code> (in this sense) because <code><code><a href="../base-4.8.2.0/Control-Monad.html#v:join">join</a></code> [[a]]</code> smashes the lists flat.</p><p>On the other hand, consider:</p><pre>data Tree a = Bin (Tree a) (Tree a) | Tip a
</pre><pre>instance <code><a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a></code> Tree where
  <code><a href="../base-4.8.2.0/Control-Monad.html#v:return">return</a></code> = Tip
  Tip a <code><a href="../base-4.8.2.0/Control-Monad.html#v:-62--62--61-">&gt;&gt;=</a></code> f = f a
  Bin l r <code><a href="../base-4.8.2.0/Control-Monad.html#v:-62--62--61-">&gt;&gt;=</a></code> f = Bin (l <code><a href="../base-4.8.2.0/Control-Monad.html#v:-62--62--61-">&gt;&gt;=</a></code> f) (r <code><a href="../base-4.8.2.0/Control-Monad.html#v:-62--62--61-">&gt;&gt;=</a></code> f)
</pre><p>This <code><a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a></code> is the free <code><a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a></code> of Pair:</p><pre>data Pair a = Pair a a
</pre><p>And we could make an instance of <code><a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a></code> for it directly:</p><pre>instance <code><a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a></code> Pair Tree where
   <code><a href="Control-Monad-Free-Ap.html#v:wrap">wrap</a></code> (Pair l r) = Bin l r
</pre><p>Or we could choose to program with <code><code><a href="Control-Monad-Free.html#v:Free">Free</a></code> Pair</code> instead of <code>Tree</code>
 and thereby avoid having to define our own <code><a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a></code> instance.</p><p>Moreover, <a href="Control-Monad-Free-Church.html">Control.Monad.Free.Church</a> provides a <code><a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a></code>
 instance that can improve the <em>asymptotic</em> complexity of code that
 constructs free monads by effectively reassociating the use of
 (<code><a href="../base-4.8.2.0/Control-Monad.html#v:-62--62--61-">&gt;&gt;=</a></code>). You may also want to take a look at the <code>kan-extensions</code>
 package (<a href="http://hackage.haskell.org/package/kan-extensions">http://hackage.haskell.org/package/kan-extensions</a>).</p><p>See <code><a href="Control-Monad-Free.html#v:Free">Free</a></code> for a more formal definition of the free <code><a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a></code>
 for a <code><a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a></code>.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src">Nothing</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:wrap" class="def">wrap</a> :: f (m a) -&gt; m a</p><div class="doc"><p>Add a layer.</p><pre>wrap (fmap f x) &#8801; wrap (fmap return x) &gt;&gt;= f
</pre></div></div><div class="subs instances"><p id="control.i:MonadFree" class="caption collapser" onclick="toggleSection('i:MonadFree')">Instances</p><div id="section.i:MonadFree" class="show"><table><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f m) =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="../mtl-2.2.1/Control-Monad-List.html#t:ListT">ListT</a> m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f m) =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="../comonad-4.2.7.2/Control-Comonad-Trans-Identity.html#t:IdentityT">IdentityT</a> m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f m) =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="../transformers-0.4.2.0/Control-Monad-Trans-Maybe.html#t:MaybeT">MaybeT</a> m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="Control-Monad-Free.html#t:Free">Free</a> f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="Control-Monad-Free-Church.html#t:F">F</a> f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> <a href="../base-4.8.2.0/Data-Functor-Identity.html#t:Identity">Identity</a> (<a href="Control-Monad-Trans-Iter.html#t:IterT">IterT</a> m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f m) =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="../mtl-2.2.1/Control-Monad-Except.html#t:ExceptT">ExceptT</a> e m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f m, <a href="../mtl-2.2.1/Control-Monad-Error-Class.html#t:Error">Error</a> e) =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="../mtl-2.2.1/Control-Monad-Error.html#t:ErrorT">ErrorT</a> e m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f m, <a href="../base-4.8.2.0/Data-Monoid.html#t:Monoid">Monoid</a> w) =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="../mtl-2.2.1/Control-Monad-Writer-Strict.html#t:WriterT">WriterT</a> w m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f m, <a href="../base-4.8.2.0/Data-Monoid.html#t:Monoid">Monoid</a> w) =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="../mtl-2.2.1/Control-Monad-Writer-Lazy.html#t:WriterT">WriterT</a> w m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f m) =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="../mtl-2.2.1/Control-Monad-Cont.html#t:ContT">ContT</a> r m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f m) =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="../mtl-2.2.1/Control-Monad-State-Strict.html#t:StateT">StateT</a> s m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f m) =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="../mtl-2.2.1/Control-Monad-State-Lazy.html#t:StateT">StateT</a> s m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f m) =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="../mtl-2.2.1/Control-Monad-Reader.html#t:ReaderT">ReaderT</a> e m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f, <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> m) =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="Control-Monad-Trans-Free-Ap.html#t:FreeT">FreeT</a> f m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> m) =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="Control-Monad-Trans-Free.html#t:FreeT">FreeT</a> f m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="Control-Monad-Trans-Free-Church.html#t:FT">FT</a> f m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f m, <a href="../base-4.8.2.0/Data-Monoid.html#t:Monoid">Monoid</a> w) =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="../mtl-2.2.1/Control-Monad-RWS-Lazy.html#t:RWST">RWST</a> r w s m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f m, <a href="../base-4.8.2.0/Data-Monoid.html#t:Monoid">Monoid</a> w) =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="../mtl-2.2.1/Control-Monad-RWS-Strict.html#t:RWST">RWST</a> r w s m)</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Free" class="def">Free</a> f a</p><div class="doc"><p>A free monad given an applicative</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Pure" class="def">Pure</a> a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Free" class="def">Free</a> (f (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a))</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Free" class="caption collapser" onclick="toggleSection('i:Free')">Instances</p><div id="section.i:Free" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../transformers-0.4.2.0/Control-Monad-Trans-Class.html#t:MonadTrans">MonadTrans</a> <a href="Control-Monad-Free-Ap.html#t:Free">Free</a></span></td><td class="doc"><p>This is not a true monad transformer. It is only a monad transformer &quot;up to <code><a href="Control-Monad-Free-Ap.html#v:retract">retract</a></code>&quot;.</p></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="../mtl-2.2.1/Control-Monad-Error-Class.html#t:MonadError">MonadError</a> e m) =&gt; <a href="../mtl-2.2.1/Control-Monad-Error-Class.html#t:MonadError">MonadError</a> e (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="../mtl-2.2.1/Control-Monad-Reader-Class.html#t:MonadReader">MonadReader</a> e m) =&gt; <a href="../mtl-2.2.1/Control-Monad-Reader-Class.html#t:MonadReader">MonadReader</a> e (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="../mtl-2.2.1/Control-Monad-State-Class.html#t:MonadState">MonadState</a> s m) =&gt; <a href="../mtl-2.2.1/Control-Monad-State-Class.html#t:MonadState">MonadState</a> s (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="../mtl-2.2.1/Control-Monad-Writer-Class.html#t:MonadWriter">MonadWriter</a> e m) =&gt; <a href="../mtl-2.2.1/Control-Monad-Writer-Class.html#t:MonadWriter">MonadWriter</a> e (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f =&gt; <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f =&gt; <a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f =&gt; <a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f =&gt; <a href="../base-4.8.2.0/Control-Monad-Fix.html#t:MonadFix">MonadFix</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f =&gt; <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Foldable.html#t:Foldable">Foldable</a> f =&gt; <a href="../base-4.8.2.0/Data-Foldable.html#t:Foldable">Foldable</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Traversable.html#t:Traversable">Traversable</a> f =&gt; <a href="../base-4.8.2.0/Data-Traversable.html#t:Traversable">Traversable</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Applicative.html#t:Alternative">Alternative</a> v =&gt; <a href="../base-4.8.2.0/Control-Applicative.html#t:Alternative">Alternative</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> v)</span></td><td class="doc"><p>This violates the Alternative laws, handle with care.</p></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> v, <a href="../base-4.8.2.0/Control-Monad.html#t:MonadPlus">MonadPlus</a> v) =&gt; <a href="../base-4.8.2.0/Control-Monad.html#t:MonadPlus">MonadPlus</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> v)</span></td><td class="doc"><p>This violates the MonadPlus laws, handle with care.</p></td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="../mtl-2.2.1/Control-Monad-Cont-Class.html#t:MonadCont">MonadCont</a> m) =&gt; <a href="../mtl-2.2.1/Control-Monad-Cont-Class.html#t:MonadCont">MonadCont</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="../prelude-extras-0.4.0.3/Prelude-Extras.html#t:Eq1">Eq1</a> f) =&gt; <a href="../prelude-extras-0.4.0.3/Prelude-Extras.html#t:Eq1">Eq1</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="../prelude-extras-0.4.0.3/Prelude-Extras.html#t:Ord1">Ord1</a> f) =&gt; <a href="../prelude-extras-0.4.0.3/Prelude-Extras.html#t:Ord1">Ord1</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="../prelude-extras-0.4.0.3/Prelude-Extras.html#t:Show1">Show1</a> f) =&gt; <a href="../prelude-extras-0.4.0.3/Prelude-Extras.html#t:Show1">Show1</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="../prelude-extras-0.4.0.3/Prelude-Extras.html#t:Read1">Read1</a> f) =&gt; <a href="../prelude-extras-0.4.0.3/Prelude-Extras.html#t:Read1">Read1</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../semigroupoids-5.0.1/Data-Semigroup-Traversable-Class.html#t:Traversable1">Traversable1</a> f =&gt; <a href="../semigroupoids-5.0.1/Data-Semigroup-Traversable-Class.html#t:Traversable1">Traversable1</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../semigroupoids-5.0.1/Data-Functor-Apply.html#t:Apply">Apply</a> f =&gt; <a href="../semigroupoids-5.0.1/Data-Functor-Apply.html#t:Apply">Apply</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../semigroupoids-5.0.1/Data-Functor-Apply.html#t:Apply">Apply</a> f =&gt; <a href="../semigroupoids-5.0.1/Data-Functor-Bind.html#t:Bind">Bind</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../semigroupoids-5.0.1/Data-Semigroup-Foldable-Class.html#t:Foldable1">Foldable1</a> f =&gt; <a href="../semigroupoids-5.0.1/Data-Semigroup-Foldable-Class.html#t:Foldable1">Foldable1</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Eq.html#t:Eq">Eq</a> (f (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a)), <a href="../base-4.8.2.0/Data-Eq.html#t:Eq">Eq</a> a) =&gt; <a href="../base-4.8.2.0/Data-Eq.html#t:Eq">Eq</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Ord.html#t:Ord">Ord</a> (f (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a)), <a href="../base-4.8.2.0/Data-Ord.html#t:Ord">Ord</a> a) =&gt; <a href="../base-4.8.2.0/Data-Ord.html#t:Ord">Ord</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Text-Read.html#t:Read">Read</a> (f (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a)), <a href="../base-4.8.2.0/Text-Read.html#t:Read">Read</a> a) =&gt; <a href="../base-4.8.2.0/Text-Read.html#t:Read">Read</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> (f (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a)), <a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> a) =&gt; <a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a)</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:retract" class="def">retract</a> :: (<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f, <a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> f) =&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a -&gt; f a</p><div class="doc"><p><code><a href="Control-Monad-Free-Ap.html#v:retract">retract</a></code> is the left inverse of <code><a href="../transformers-0.4.2.0/Control-Monad-Trans-Class.html#v:lift">lift</a></code> and <code><a href="Control-Monad-Free-Ap.html#v:liftF">liftF</a></code></p><pre><code><a href="Control-Monad-Free-Ap.html#v:retract">retract</a></code> . <code><a href="../transformers-0.4.2.0/Control-Monad-Trans-Class.html#v:lift">lift</a></code> = <code><a href="../base-4.8.2.0/Data-Function.html#v:id">id</a></code>
<code><a href="Control-Monad-Free-Ap.html#v:retract">retract</a></code> . <code><a href="Control-Monad-Free-Ap.html#v:liftF">liftF</a></code> = <code><a href="../base-4.8.2.0/Data-Function.html#v:id">id</a></code>
</pre></div></div><div class="top"><p class="src"><a name="v:liftF" class="def">liftF</a> :: (<a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> f, <a href="Control-Monad-Free-Ap.html#t:MonadFree">MonadFree</a> f m) =&gt; f a -&gt; m a</p><div class="doc"><p>A version of lift that can be used with just a Functor for f.</p></div></div><div class="top"><p class="src"><a name="v:iter" class="def">iter</a> :: <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f =&gt; (f a -&gt; a) -&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a -&gt; a</p><div class="doc"><p>Given an applicative homomorphism from <code>f</code> to <code>Identity</code>, tear down a <code><a href="Control-Monad-Free-Ap.html#t:Free">Free</a></code> <code><a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a></code> using iteration.</p></div></div><div class="top"><p class="src"><a name="v:iterA" class="def">iterA</a> :: (<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> p, <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f) =&gt; (f (p a) -&gt; p a) -&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a -&gt; p a</p><div class="doc"><p>Like <code><a href="Control-Monad-Free-Ap.html#v:iter">iter</a></code> for applicative values.</p></div></div><div class="top"><p class="src"><a name="v:iterM" class="def">iterM</a> :: (<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> m, <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f) =&gt; (f (m a) -&gt; m a) -&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a -&gt; m a</p><div class="doc"><p>Like <code><a href="Control-Monad-Free-Ap.html#v:iter">iter</a></code> for monadic values.</p></div></div><div class="top"><p class="src"><a name="v:hoistFree" class="def">hoistFree</a> :: (<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f, <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> g) =&gt; (<span class="keyword">forall</span> a. f a -&gt; g a) -&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f b -&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> g b</p><div class="doc"><p>Lift an applicative homomorphism from <code>f</code> to <code>g</code> into a monad homomorphism from <code><code><a href="Control-Monad-Free-Ap.html#t:Free">Free</a></code> f</code> to <code><code><a href="Control-Monad-Free-Ap.html#t:Free">Free</a></code> g</code>.</p></div></div><div class="top"><p class="src"><a name="v:foldFree" class="def">foldFree</a> :: (<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f, <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> m) =&gt; (<span class="keyword">forall</span> x. f x -&gt; m x) -&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a -&gt; m a</p><div class="doc"><p>Given an applicative homomorphism, you get a monad homomorphism.</p></div></div><div class="top"><p class="src"><a name="v:toFreeT" class="def">toFreeT</a> :: (<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f, <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> m) =&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a -&gt; <a href="Control-Monad-Trans-Free-Ap.html#t:FreeT">FreeT</a> f m a</p><div class="doc"><p>Convert a <code><a href="Control-Monad-Free-Ap.html#t:Free">Free</a></code> monad from <a href="Control-Monad-Free-Ap.html">Control.Monad.Free.Ap</a> to a <code><a href="Control-Monad-Trans-Free-Ap.html#t:FreeT">FreeT</a></code> monad
 from <a href="Control-Monad-Trans-Free-Ap.html">Control.Monad.Trans.Free.Ap</a>.
 WARNING: This assumes that <code><a href="Control-Monad-Free-Ap.html#v:liftF">liftF</a></code> is an applicative homomorphism.</p></div></div><div class="top"><p class="src"><a name="v:cutoff" class="def">cutoff</a> :: <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f =&gt; <a href="../base-4.8.2.0/Prelude.html#t:Integer">Integer</a> -&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a -&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> a)</p><div class="doc"><p>Cuts off a tree of computations at a given depth.
 If the depth is 0 or less, no computation nor
 monadic effects will take place.</p><p>Some examples (n &#8805; 0):</p><pre>cutoff 0     _        == return Nothing</pre><pre>cutoff (n+1) . return == return . Just</pre><pre>cutoff (n+1) . lift   ==   lift . liftM Just</pre><pre>cutoff (n+1) . wrap   ==  wrap . fmap (cutoff n)</pre><p>Calling 'retract . cutoff n' is always terminating, provided each of the
 steps in the iteration is terminating.</p></div></div><div class="top"><p class="src"><a name="v:unfold" class="def">unfold</a> :: <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f =&gt; (b -&gt; <a href="../base-4.8.2.0/Data-Either.html#t:Either">Either</a> a (f b)) -&gt; b -&gt; <a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a</p><div class="doc"><p>Unfold a free monad from a seed.</p></div></div><div class="top"><p class="src"><a name="v:unfoldM" class="def">unfoldM</a> :: (<a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> f, <a href="../base-4.8.2.0/Data-Traversable.html#t:Traversable">Traversable</a> f, <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> m, <a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> m) =&gt; (b -&gt; m (<a href="../base-4.8.2.0/Data-Either.html#t:Either">Either</a> a (f b))) -&gt; b -&gt; m (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a)</p><div class="doc"><p>Unfold a free monad from a seed, monadically.</p></div></div><div class="top"><p class="src"><a name="v:_Pure" class="def">_Pure</a> :: <span class="keyword">forall</span> f m a p. (<a href="../profunctors-5.2/Data-Profunctor-Choice.html#t:Choice">Choice</a> p, <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> m) =&gt; p a (m a) -&gt; p (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a) (m (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a))</p><div class="doc"><p>This is <code>Prism' (Free f a) a</code> in disguise</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>preview _Pure (Pure 3)
</code></strong>Just 3
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>review _Pure 3 :: Free Maybe Int
</code></strong>Pure 3
</pre></div></div><div class="top"><p class="src"><a name="v:_Free" class="def">_Free</a> :: <span class="keyword">forall</span> f m a p. (<a href="../profunctors-5.2/Data-Profunctor-Choice.html#t:Choice">Choice</a> p, <a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> m) =&gt; p (f (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a)) (m (f (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a))) -&gt; p (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a) (m (<a href="Control-Monad-Free-Ap.html#t:Free">Free</a> f a))</p><div class="doc"><p>This is <code>Prism' (Free f a) (f (Free f a))</code> in disguise</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>preview _Free (review _Free (Just (Pure 3)))
</code></strong>Just (Just (Pure 3))
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>review _Free (Just (Pure 3))
</code></strong>Free (Just (Pure 3))
</pre></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>